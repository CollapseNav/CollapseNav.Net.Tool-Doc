---
slug: 2023summary
title: 2023年度回顾
authors: Main
---

## 0. 总览

不知不觉2023年就这么过去了, 今年发生了不少事情, 比如:

* 离职上一家, 入职新公司
* 用了chatgpt, 不过尝试搞ai机器人失败
* 装了"新"电脑, 重新开始搞ai玩
* 开始更新B站视频, 数据看起来还凑合
* ......

## 1. 离职

今年2月份的时候我从待了一年半的上家离职, 换了个新的公司, 对我来说这大概是今年的头等大事了

在上家入职的时候我曾经有过"宏伟蓝图", 觉得可以做点什么大干一场

面试时根据hr的介绍, 他们在国内国外都有大量用户, 整个行业的上下游他们都在做, 我想着这样的业务规模在以后可以做成saas之类的平台, 为行业内的各个从业者提供他们所需要的服务, 是可以做的很大的

抱着这样的想法我就入职了, 结果没想到是掉坑里了

### 1.1 上家的坑

#### 混乱的数据库

针对每个城市都会有一套单独的数据库(市库), 不过所有城市都使用同一套代码, 然后在市库之上还会有一套省库, 各个市库之间的结构不一定是相同的, 并且各个市库之间还会有一些字段拥有多个不同的用途, 同时市库和省库之间会有一些数据需要定时地做数据同步

除此之外还有一个旧的市库也在同时使用, 然后这个旧的市库和新的市库之间也需要多个同步程序做数据同步, 数据冲突的事件时有发生

更加难受的是, 这些同步程序并不可靠, 有的时候会莫名其妙挂掉, 挂掉的原因可能就是因为上述的数据库表结构不一致

当然最最难受的是, 全公司没有人或者文档能够讲清楚这些市库之间的表结构差异, 在开发和维护时就是数不清的大雷

#### 运维×dba√

上家存在所谓的运维岗, 但是运维做的最多的事情是写sql刷数据, 基本上我每次去找运维, 他们都在写sql处理数据上的事情, 为上面一点擦屁股

听说现在的那个运维组长熬了两年白头发都长出来不少了

#### 狂躁症老板

上家老板可能有狂躁症, 经常能看到他疯狂拍桌子骂人, 而且控制欲也非常强, 可能也有点被害妄想症, 反正一年半被霍霍了几十个产品经理

他有点"霸道"总裁那种恶心的感觉, 他只要他觉得, 不要别人怎么觉得, 作为乙方会和甲方的老板对骂, 因为他觉得甲方的业务不对, 甲方应该按照他所想的那样组织业务, 反正就很奇奇怪怪

#### 貌合神离的系统

上家的系统还挺多, 行业的上下游都有所涉及, 也是因此我觉得可以搞类似saas的系统

不过实际上手做的时候发现, 所有系统只是看起来有关联, 但实际上关联并不大, 虽然业务上应当存在交互, 但是在实际运行过程中并不能体现这样的交互, 各个系统还是各做各的, 然后通过蹩脚的同步程序维护那脆弱的关联

同步冲突这种事情也是经常发生的, 所以运维需要经常性地写sql维护数据

### 1.2 离职原因

由于以上的一些原因, 在上家待着

* 没有钱
* 没有时间
* 没有经验
* 没有希望

所以在老板把矛头转向他觉得他可能已经搞懂了的开发之前, 我就选择溜了

### 1.3 现在这家

现在这家公司不是软件公司, 只是集团中的一个it部门, 所以整体的开发任务相对就少了

面试的时候还说过他们的开发一般情况下任务是不饱和的, 我一听就心动了, 至少我能有点时间

果不其然, 比上家多了很多时间, 可以搞一些比较有意思的事情

## 2. ChatGpt

要说2023年的互联网上什么东西最火爆, 那当然是ChatGpt了, 离职有了较多的时间之后当然是得好好玩玩看看了

### 2.1 简单使用

虽然ChatGpt是去年出现的, 但我在今年入职了新的公司之后才开始使用

年初的时候账号注册还挺麻烦, 又是搞短信验证又是搞节点什么的, 不过折腾了半天还是成功注册了

那时候还有免费送的18刀额度, 用的不亦乐乎, 不得不说, 2023年初的ChatGpt是真的有点厉害, 虽然后来谷歌推出了他们的Bard, 但是由于不支持中文, 所以还是转回去用ChatGpt了

除了那时候最常用的web页面, 还试了试通过api去进行调用, 不过也只是简单试了试, 作为一个技术储备, 并没有想到能拿来干什么

### 2.2 QQ机器人

后来看到编程群里有人引入了QQ机器人账号, 然后接入ChatGpt, 让机器人可以在群内扮演猫娘的同时解决群友提出的编程问题

我看到后觉得很有意思, 然后用 [go-cqhttp](https://github.com/Mrs4s/go-cqhttp) 做了个机器人项目

初期和常见的机器人一样, 可以at对应账号之后正常对话, 也可以通过一些预设的命令触发我自己编写的工具, 不过并没有监听群内的所有消息, 也没有做私聊功能, 毕竟我的账号额度有限

本来想通过prompt让ChatGpt帮我判断用户的具体需求, 分析用户的意图, 不过考虑到token的消耗, 最后还是选择部署专门用于分类的NLP模型先对接收到的消息做一个快速的分类, 让机器人可以在不使用 ChatGpt 的情况下做简单的工具调用

![qq-tool-1](/img/2023summary/qq-tool-1.webp)
![qq-tool-2](/img/2023summary/qq-tool-2.webp)

上面的这个过程中并没有chatgpt的参与, 只靠一个简单的可以使用cpu运行的nlp模型实现, 先根据相似度进行分类, 然后去调用对应分类匹配的工具返回运行的结果

分类匹配到查看黑名单白名单什么的就查看在机器人设置中黑白名单列表, 如果是添加或者移除黑白名单, 就调用修改的方法增减列表

如果分类是提问或者不知道具体什么分类的, 就全都丢给ChatGpt当成普通的对话处理

那时候曾有过好好做一个机器人框架的想法, 捣鼓两天搞了一套简易的依赖注入框架, 为了不只是局限于QQ机器人, 想着以后说不定能接入到其他平台里面使用, 还抽象了**"消息"**, 实现了一个简易的管道中间件处理机制, 可以处理http请求以及QQ消息什么的

那时候吭呲吭呲做了大半个月

### 2.3 封禁

不过到了后期, 我的机器人就没法正常做下去了, 一方面由于OpenAi持续封禁ip, 我的节点已经无法正常访问ChatGpt的页面, 虽然还能通过api使用, 但是总体使用成本提高了很多

另一方面是腾讯加大了对QQ机器人协议的封禁力度, 我的机器人没法正常工作, 在正常回复几条群消息之后就被风控, 无法再次回复

所以在今年6月份我的ChatGpt额度到期之后, QQ机器人项目就开始了无限期的搁置, 到现在已经半年多没有再更新了

同时由于 [claude](https://claude.ai/chats) 的兴起以及bard开始支持中文, 我放弃了ChatGpt转头使用其他的服务

但这两者我都没有再去看对应的api接入文档, 群喵娘就这样彻底陷入了沉寂




